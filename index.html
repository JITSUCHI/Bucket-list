<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Bucket Listï¼ˆå…¨ã‚«ãƒ†ã‚´ãƒªãƒ»è‡ªå‹•é€£ç•ªï¼‰</title>
  <link rel="stylesheet" href="./style.css?v=23" />
  <style>
    .toolbar{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;margin:8px 0 16px}
    .btn{border:1px solid #222;background:#fff;border-radius:6px;padding:6px 10px;cursor:pointer}
    .btn:hover{filter:brightness(0.98)}
    .row{display:flex;gap:8px;align-items:center;margin:10px 0 6px}
    .row input[type="text"]{flex:1;min-width:160px;padding:8px;border:1px solid #cbd5e1;border-radius:6px}
    .row select{padding:7px;border:1px solid #cbd5e1;border-radius:6px}
    .item-actions{display:inline-flex;gap:6px;margin-left:8px;opacity:.7}
    .item-actions button{border:1px solid #cbd5e1;background:#fff;border-radius:6px;padding:2px 6px;cursor:pointer}
    .item-actions button:hover{background:#f1f5f9}
    .editable[contenteditable="true"]{outline:2px dashed #60a5fa; outline-offset:2px; background:#eff6ff}
    .muted{color:#666; font-size:12px}
    nav a{margin-top:8px;display:inline-block;color:#2563eb;text-decoration:none;font-weight:600}
    nav a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="paper">
    <div class="sheet">
      <header class="sheet__header">
        <h1>My Bucket List</h1>
        <p class="legend">
          <span class="legend__red">èµ¤è‰²:é”æˆ</span>ã€
          <span class="legend__blue">é’è‰²:é€²æ—ã‚ã‚Š</span>ã€
          <span class="legend__green">ç·‘è‰²:ç¶™ç¶šä¸­</span>
        </p>
        <p class="updated" id="updated">ï¼ˆæœ€çµ‚æ›´æ–°æ—¥: â€”ï¼‰</p>

        <!-- ğŸ“Š progress.html ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¿½åŠ  -->
        <nav>
          <a href="progress.html">ğŸ“Š å®Ÿæ–½çŠ¶æ³ã‚’è¦‹ã‚‹</a>
        </nav>
      </header>

      <div id="app"></div>

      <p class="muted">â€» ã“ã®ç‰ˆã¯ localStorage ã«ä¿å­˜ã—ã¾ã™ã€‚åˆ¥ç«¯æœ«ã§ã¯ JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’ä½¿ã£ã¦ãã ã•ã„ã€‚</p>
    </div>
  </div>

  <script>
  const KEY = "bucketlist_v4";
 const initialData = {
  updatedAt: new Date().toISOString(),
  categories: [
    { id:"travel", title:"ğŸ—º æ—…è¡Œãƒ»å†’é™º", items:[
      { text:"å®¶æ—ã§çŸ³å£å³¶ã«è¡ŒããŸã„ï¼", status:"todo" },
      { text:"é«˜æ ¡ã®å‹é”ã¨ã‚®ãƒ£ãƒ³ãƒ–ãƒ«æ—…è¡Œã«è¡ŒããŸã„ï¼", status:"todo" },
    ]},
    { id:"learn", title:"ğŸ“š å­¦ç¿’ãƒ»ã‚¹ã‚­ãƒ«", items:[
      { text:"Gæ¤œå®šã«åˆæ ¼ã™ã‚‹ã€‚", status:"todo" },
      { text:"Eè³‡æ ¼ã«åˆæ ¼ã™ã‚‹ã€‚", status:"todo" },
      { text:"JavaSilverã«åˆæ ¼ã™ã‚‹ã€‚", status:"todo" },
      { text:"å¿œç”¨æƒ…å ±æŠ€è¡“è€…è©¦é¨“ã«åˆæ ¼ã™ã‚‹ã€‚", status:"todo" },
    ]},
    { id:"career", title:"ğŸ’¼ ã‚­ãƒ£ãƒªã‚¢ãƒ»ãŠé‡‘", items:[
      { text:"çµå©šã—ãŸã„", status:"todo" },
      { text:"å­ä¾›ã‚’ä½œã‚Šå­å­«ã‚’æ®‹ã—ãŸã„", status:"todo" },
      { text:"å²¡å±±ã®ç¨¼åƒã‚’ç„¡äº‹ã«è¿ãˆã‚‹", status:"todo" },
      { text:"å¹´å1000ä¸‡ã®ä¸–ç•Œã‚’è¦‹ã¦ã¿ãŸã„ï¼ˆã‚¨ãƒªãƒ¼ãƒˆã£ã¦æ„Ÿã˜ãŒã™ã‚‹ï¼‰", status:"todo" },
      { text:"æ‰‹æ®µã¯å•ã‚ãªã„ã‹ã‚‰å€‹äººã§åç›ŠãŒå¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„", status:"todo" },
      { text:"ç·è³‡ç”£1000ä¸‡è¶…ãˆãŸã„", status:"todo" },
      { text:"ç·è³‡ç”£5000ä¸‡è¶…ãˆãŸã„", status:"todo" },
      { text:"ç·è³‡ç”£1å„„è¶…ãˆãŸã„ã€‚", status:"todo" },
      { text:"æ ªå¼æŠ•è³‡ã®å¹´åˆ©ç›Š10%ã‚’è¶…ãˆã‚‹ï¼ˆæ¯å¹´ï¼‰", status:"todo" },
    ]},
    { id:"life", title:"ğŸƒ å¥åº·ãƒ»ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«", items:[
      { text:"ä½“é‡60kgå°ã®æ™¯è‰²ã‚’è¦‹ã¦ã¿ãŸã„ã€‚", status:"todo" },
      { text:"çœ‰æ¯›ã‚µãƒ­ãƒ³ãƒ‡ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã€‚", status:"todo" },
    ]},
    { id:"hobby", title:"ğŸ¨ è¶£å‘³ãƒ»ä½“é¨“", items:[
      { text:"æµ·å¤–ãƒˆãƒŠãƒ¡ï¼ˆPorkerï¼‰ã§ã‚¤ãƒ³ãƒãƒã—ã¦ã¿ãŸã„ï¼", status:"todo" },
      { text:"ãƒ©ã‚¹ãƒ™ã‚¬ã‚¹ã§æ—…è¡Œä»£ã‚’ã‹ã‘ãŸã‚®ãƒ£ãƒ³ãƒ–ãƒ«ãŒã—ãŸã„ï¼", status:"todo" },
      { text:"ã‚¢ãƒŸãƒ¥ãƒ¼ã‚ºãƒ¡ãƒ³ãƒˆã‚«ã‚¸ãƒã®ãƒˆãƒŠãƒ¡ã§å„ªå‹ã—ãŸã„ï¼", status:"todo" },
      { text:"é˜¿æ™ºæ‘ã§æ—¥æœ¬ä¸€ã®æ˜Ÿç©ºã‚’å ªèƒ½ã—ãŸã„ï¼", status:"todo" },
      { text:"å¯Œå£«å±±ã®ãµã‚‚ã¨ã§ã‚­ãƒ£ãƒ³ãƒ—ãŒã—ãŸã„ï¼", status:"todo" },
      { text:"ã‚­ãƒ£ãƒ³ãƒ—ã§è…°ãŒæŠœã‘ã‚‹ã»ã©ãŠã„ã—ã„ã”ã¯ã‚“ã‚’é£Ÿã¹ãŸã„ã€‚", status:"todo" },
      { text:"è‡ªåˆ†ã§é‡£ã£ãŸé­šã‚’ç„¼ã„ã¦é£Ÿã¹ã¦ã¿ãŸã„ã€‚", status:"todo" },
      { text:"ä¸€äººã‚­ãƒ£ãƒ³ãƒ—ã‚’ã‚„ã£ã¦ã¿ãŸã„ã€‚", status:"todo" },
      { text:"ã€ŒçœŸå¤ã®æœå®Ÿã€ã‚’ãƒ”ã‚¢ãƒã§å¼¾ã‘ã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã€‚", status:"todo" },
      { text:"ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘æ—…è¡Œã«è¡Œã£ã¦ã¿ãŸã„ï¼", status:"todo" },
      { text:"ä¸–ç•Œã§ä¸€ç•ªç™ºå±•ã—ã¦ã„ã‚‹å ´æ‰€ã«è¡Œã£ã¦ã¿ãŸã„ï¼ˆã‚¢ãƒ¡ãƒªã‚«ï¼‰", status:"todo" },
      { text:"6å¤§é™¸åˆ¶è¦‡ã—ãŸã„ï¼", status:"todo" },
      { text:"ãŸã“ç„¼ãã®æ­£è§£ã‚’ãŸãŸãå‡ºã—ãŸã„ï¼", status:"todo" },
      { text:"å°ç¬ åŸè«¸å³¶ã«è¡Œã£ã¦ã¿ãŸã„ï¼", status:"todo" },
      { text:"ã‚°ãƒ©ãƒ³ãƒ‰ã‚­ãƒ£ãƒ‹ã‚ªãƒ³ã«è¡Œã£ã¦è‡ªç„¶ã®å£®å¤§ã•ã‚’æ„Ÿã˜ãŸã„ã€‚", status:"todo" },
      { text:"ãƒ‰ãƒ¬ãƒ¼ã‚¯æµ·å³¡ã‚’ä¹—ã‚Šè¶ŠãˆãŸã„ã€‚ãã—ã¦ãã®å…ˆã®å—æ¥µå¤§é™¸ã¸ã€ã€", status:"todo" },
      { text:"åœ°çƒãŒä¸¸ã„ã“ã¨ã‚’ã“ã®ç›®ã§ç¢ºèªã—ãŸã„", status:"todo" },
      { text:"å¯Œå£«å±±ã«ç™»ã‚ŠãŸã„ï¼ˆæ¸ˆï¼‰", status:"done" },
      { text:"å®¶æ—ã§çŸ³å£å³¶ã«è¡ŒããŸã„ï¼ï¼ˆé‡è¤‡ï¼‰", status:"todo" },
      { text:"é«˜æ ¡ã®å‹é”ã¨ã‚®ãƒ£ãƒ³ãƒ–ãƒ«æ—…è¡Œã«è¡ŒããŸã„ï¼ï¼ˆé‡è¤‡ï¼‰", status:"todo" },
    ]},
    { id:"mind", title:"ğŸŒ± ç²¾ç¥ãƒ»æ•™é¤Š", items:[
      // ä»Šã¯ã¾ã ç©ºã€‚å¿…è¦ãªã‚‰ã“ã“ã«è¿½åŠ ã—ã¦ãã ã•ã„ï¼
    ]},
  ]
};

  const statusClass = { done:"done red", progress:"blue", ongoing:"green", todo:"" };

  const load = ()=>JSON.parse(localStorage.getItem(KEY)||"null")||structuredClone(initialData);
  const save = (d)=>{d.updatedAt=new Date().toISOString();localStorage.setItem(KEY,JSON.stringify(d));
    document.getElementById("updated").textContent=`ï¼ˆæœ€çµ‚æ›´æ–°æ—¥: ${new Date(d.updatedAt).toLocaleString()}ï¼‰`;
  };

  let state = load();

  const el=(tag,attrs={},...chs)=>{
    const n=document.createElement(tag);
    for(const[k,v] of Object.entries(attrs)){
      if(k==="class") n.className=v;
      else if(k.startsWith("on")) n.addEventListener(k.slice(2),v);
      else n.setAttribute(k,v);
    }
    chs.forEach(c=>n.append(c instanceof Node?c:document.createTextNode(c)));
    return n;
  };

  function render(){
    const app=document.getElementById("app"); app.innerHTML="";
    let counter=1;

    state.categories.forEach(cat=>{
      const details=el("details",{class:"blk",open:true});
      details.append(el("summary",{},el("span",{},cat.title)));

      const addRow = el("div",{class:"row"},
        el("input",{type:"text",placeholder:"é …ç›®ã‚’è¿½åŠ â€¦",id:`add-${cat.id}`}),
        el("select",{id:`sel-${cat.id}`},
          el("option",{value:"todo"},"æœª"),
          el("option",{value:"progress"},"é€²æ—"),
          el("option",{value:"ongoing"},"ç¶™ç¶š"),
          el("option",{value:"done"},"é”æˆ"),
        ),
        el("button",{class:"btn",onclick:()=>addItem(cat.id)},"è¿½åŠ ")
      );
      details.append(addRow);

      const ol=el("ol",{class:"items"});
      cat.items.forEach((item,idx)=>{
        ol.append(renderItem(cat.id,idx,item,counter));
        counter++;
      });
      details.append(ol);
      app.append(details);
    });
    save(state);
  }

  function renderItem(catId, idx, item, no){
    const li=el("li");
    const span=el("span",{class:`editable ${statusClass[item.status]||""}`,contenteditable:"false"});
    span.textContent=`${no}. ${item.text}`;

    const sel=el("select",{onchange:e=>{
      item.status=e.target.value;
      span.className=`editable ${statusClass[item.status]||""}`;
      save(state); render();
    }},
      el("option",{value:"todo",selected:item.status==="todo"},"æœª"),
      el("option",{value:"progress",selected:item.status==="progress"},"é€²æ—"),
      el("option",{value:"ongoing",selected:item.status==="ongoing"},"ç¶™ç¶š"),
      el("option",{value:"done",selected:item.status==="done"},"é”æˆ"),
    );

    const actions=el("span",{class:"item-actions"},
      el("button",{onclick:()=>{
        const ed=span.getAttribute("contenteditable")==="true";
        if(ed){span.setAttribute("contenteditable","false"); item.text=span.textContent.replace(/^\d+\.\s*/,"").trim(); save(state);}
        else{span.setAttribute("contenteditable","true");span.focus();}
      }},"âœ"),
      el("button",{onclick:()=>moveItem(catId,idx,-1)},"â†‘"),
      el("button",{onclick:()=>moveItem(catId,idx,1)},"â†“"),
      el("button",{onclick:()=>deleteItem(catId,idx)},"ğŸ—‘"),
    );

    li.append(span," ",sel,actions);
    return li;
  }

  function addItem(catId){
    const input=document.getElementById(`add-${catId}`);
    const sel=document.getElementById(`sel-${catId}`);
    const text=(input.value||"").trim();
    if(!text) return;
    const cat=state.categories.find(c=>c.id===catId);
    cat.items.push({text,status:sel.value});
    input.value="";
    render();
  }

  function deleteItem(catId,idx){
    const cat=state.categories.find(c=>c.id===catId);
    cat.items.splice(idx,1); render();
  }
  function moveItem(catId,idx,d){
    const cat=state.categories.find(c=>c.id===catId);
    const j=idx+d; if(j<0||j>=cat.items.length)return;
    const [it]=cat.items.splice(idx,1); cat.items.splice(j,0,it); render();
  }

  render();
  </script>
</body>
</html>

